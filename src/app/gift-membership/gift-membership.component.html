<div class="container main-container" >
    <!--Card-->
    <mat-card>
        <ng-template ngbModalContainer></ng-template>
        <mat-card-content>
            <form #formData="ngForm" (ngSubmit)="submitPayment(formData.valid)">
                <br>
                <div class="row">
                    <div class="offset-lg-1 col-lg-6">
                        <h6 *ngIf="onlineEntry"><strong>MEMBER: {{ member?.memberName }}</strong></h6> 
                        <h6 *ngIf="!onlineEntry"><strong>GIFT MEMBERSHIPS: CHECK ENTRY</strong></h6> 
                    </div>
                    <div class="col-lg-2">
                        <div>
                            <label><strong> # of Years: </strong></label>
                        </div>
                    </div>
                    <div class="col-lg-2">
                        <div>
                            <label><strong> Amount per Year: </strong></label>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="offset-lg-1 col-lg-6" *ngIf="onlineEntry">
                        <div>
                            <p>
                                <strong>Gift Membership for the Year {{setup?.duesYear}}</strong><br>
                                <strong>Regular Membership for Individuals or Couples is {{minPrice | currency}} per Year</strong><br>
                                <strong>Recipient Receives an 8 1/2" X 11" Membership Certificate Inscribed with their Name</strong><br>
                            </p>
                        </div>
                    </div><!--col-->

                    <div class="offset-lg-1 col-lg-2" *ngIf="!onlineEntry">
                        <mat-form-field class="custom-margin">
                            <input type="text" placeholder="Member No" aria-label="Member No" matInput 
                                name="donorMemberNo" [matAutocomplete]="auto" [(ngModel)]="model.donorMemberNo"
                                (ngModelChange)="onMemberNoChange($event)" required>
                            <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayFn">
                                <mat-option *ngFor="let member of members | filter : 'memberNo' : model.donorMemberNo" [value]="member.memberNo">
                                    <div class="row">
                                        <div class="col-1">
                                            {{ member.memberNo }}
                                        </div>
                                        <div class="col-11">
                                            {{member.memberName}}
                                        </div>
                                    </div>
                                    </mat-option>
                            </mat-autocomplete>
                        </mat-form-field>
                    </div><!--col-->

                    <div class="col-lg-4" *ngIf="!onlineEntry">
                        {{ member?.memberName }}<br>
                        Last membership year: {{ member?.lastDuesYear }}
                    </div><!--col-->
            
                    <div class="col-lg-5">
                        <div class="row">
                            <div class="col-lg-5">
                                <div class="md-form form-group input-group">
                                    <input type="number" class="form-control text-sm-center" aria-label="Quantity" name="duesQuantity" [(ngModel)]="model.duesQuantity">
                                    <span class="input-group-addon">X</span>
                                </div>
                            </div><!--col-->
                            
                            <div class="col-lg-5">
                                <div class="md-form form-group input-group">
                                    <span class="input-group-addon">$</span>
                                    <input type="number" class="form-control text-sm-center" aria-label="Amount (to the nearest dollar)" readonly name="duesAmount" [(ngModel)]="model.duesAmount">
                                    <span class="input-group-addon">.00</span>
                                </div>
                            </div> <!--col-->
                        </div> <!--row-->
                    </div> <!--col-->

                </div> <!--row-->

                <div class="row" *ngIf="!onlineEntry">
                    <div class="offset-md-1 col-md-2">
                        <mat-form-field class="example-full-width">
                            <input type="text" placeholder="Check #" aria-label="Check #" matInput 
                                name="checkNo" [(ngModel)]="model.checkNo" required>
                        </mat-form-field>
                    </div>
                    <div class="col-md-2">
                        <mat-form-field>
                            <input matInput [matDatepicker]="picker" placeholder="Check Date"
                                name="checkDate" [(ngModel)]="model.checkDate" required>
                            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                            <mat-datepicker #picker></mat-datepicker>
                        </mat-form-field>
                    </div>
                </div>
                <br>

                <div class="row">
                    <div class="offset-lg-1 col-lg-6 align-self-end">
                        <div class="row">
                            <div class="col-lg-12">
                                <input-custom fieldType="uppercase" fieldName="recipientName" placeholderText="Name" maxLength="35"
                                    [model]="model" [value]="model.recipientName" [isRequired]="true" errorMessage="Name is required">
                                </input-custom>
                            </div> <!--col-->
                        </div> <!--row-->
                        <div class="row">
                            <div class="col-lg-12">
                                <input-custom fieldType="uppercase" fieldName="street1" placeholderText="Address Line 1" maxLength="35"
                                    [model]="model" [value]="model.street1" [isRequired]="true" errorMessage="Address Line 1 is required">
                                </input-custom>
                            </div> <!--col-->
                        </div> <!--row-->
                        <div class="row">
                            <div class="col-lg-12">
                                <input-custom fieldType="uppercase" fieldName="street2" placeholderText="Address Line 2" maxLength="35"
                                    [model]="model" [value]="model.street2" [isRequired]="false" errorMessage="">
                                </input-custom>
                            </div> <!--col-->
                        </div> <!--row-->
                        <div class="row">
                            <div class="col-lg-12">
                                <input-custom fieldType="uppercase" fieldName="city" placeholderText="City" maxLength="25"
                                    [model]="model" [value]="model.city" [isRequired]="true" errorMessage="City is required">
                                </input-custom>
                            </div> <!--col-->
                        </div> <!--row-->
                        <div class="row">
                            <div class="col-md-2">
                                <input-custom fieldType="uppercase" fieldName="state" placeholderText="State" maxLength="2"
                                    [model]="model" [value]="model.state" [isRequired]="true" errorMessage="State is required">
                                </input-custom>
                            </div>
                            <div class="col-md-4">
                                <input-custom fieldType="uppercase" fieldName="zip" placeholderText="Postal Code" maxLength="9"
                                    [model]="model" [value]="model.zip" [isRequired]="true" errorMessage="Postal Code is required">
                                </input-custom>
                            </div>
                            <div class="col-md-6">
                                <mat-form-field>
                                    <mat-select placeholder="Country" name="Country" [(ngModel)]="model.country">
                                        <mat-option *ngFor="let country of countries" [value]="country.name | uppercase">
                                            {{country.name | uppercase}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                        </div> <!--row-->
                    </div> <!--col-->
                            
                    <div class="col-lg-5 align-self-end">
                        <div class="row">
                            <div class="col-lg-5">
                                <div  style="margin-top: 12px;">
                                    <label><strong> Membership Total: <br></strong></label>
                                </div>
                            </div> <!--col-->

                            <div class="col-lg-5">
                                <div class="md-form form-group border-top-double-addon">
                                    <div class="md-form form-group input-group">
                                        <span class="input-group-addon">$</span>
                                        <input #membershipTotal type="number" min="1" class="form-control text-sm-center" aria-label="Amount (to the nearest dollar)" readonly name="membershipTotal" [(ngModel)]="model.membershipTotal">
                                        <span class="input-group-addon">.00</span>
                                    </div>
                                </div> 
                            </div> <!--col-->
                        </div> <!--row-->

                        <div class="row" *ngIf="!superUser" >
                            <div class="col-lg-10">
                                <button mat-raised-button color="primary" type="button" class="float-sm-right custom-width" (click)="onSwitch()">Switch Entry Mode</button>
                            </div> <!--col-->
                        </div> <!--row-->

                        <div class="row">
                            <div class="col-lg-10">
                                <button mat-raised-button color="primary" type="submit" class="float-sm-right custom-width" [disabled]="!formData.valid">{{submitButtonText}}</button>
                            </div> <!--col-->
                        </div> <!--row-->            
                    </div> <!--col-->
                </div> <!--row-->
                <br>
            </form>
        </mat-card-content>
    </mat-card>
</div>